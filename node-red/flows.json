[
    {
        "id": "b9fdfd80.0360c",
        "type": "ui_chart",
        "z": "dc2d0fc7.ab66f",
        "name": "Corrente",
        "group": "3f6d1fe6.35e14",
        "order": 2,
        "width": 0,
        "height": 0,
        "label": "Corrente",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "Corrente",
        "dot": false,
        "ymin": "0",
        "ymax": "10",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "60",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "useOldStyle": false,
        "outputs": 1,
        "x": 933.4999771118164,
        "y": 648.9999389648438,
        "wires": [
            []
        ]
    },
    {
        "id": "950bde97.211ed",
        "type": "ui_chart",
        "z": "dc2d0fc7.ab66f",
        "name": "",
        "group": "daea733b.25795",
        "order": 2,
        "width": 0,
        "height": 0,
        "label": "Consumo Total",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "Consumo Total",
        "dot": false,
        "ymin": "0",
        "ymax": "10",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "60",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "useOldStyle": false,
        "outputs": 1,
        "x": 954.0000152587891,
        "y": 698.9999256134033,
        "wires": [
            []
        ]
    },
    {
        "id": "6c8d36c6.4f8ac8",
        "type": "ui_text",
        "z": "dc2d0fc7.ab66f",
        "group": "897eede5.c1ae9",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "Evento",
        "label": "Evento",
        "format": "{{msg.payload.evento}}",
        "layout": "row-spread",
        "x": 934.5000305175781,
        "y": 755.9998874664307,
        "wires": []
    },
    {
        "id": "c4bded6d.00f68",
        "type": "function",
        "z": "dc2d0fc7.ab66f",
        "name": "Lastevento",
        "func": "msg.payload.evento = msg.payload.event_type\nmsg.payload.energy_ativa = msg.payload.energy_ativa + \" kWh\"\nmsg.payload.voltage_real = msg.payload.voltage_real_rms + \" V\"\nmsg.payload.phase_real = msg.payload.phase_real_rms + \" A\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 694.5000610351562,
        "y": 801.9999008178711,
        "wires": [
            [
                "6c8d36c6.4f8ac8",
                "356e0505.dc025a",
                "8df02a9.92385d8",
                "8854176c.41c818",
                "359b6046.ee78f"
            ]
        ]
    },
    {
        "id": "356e0505.dc025a",
        "type": "ui_text",
        "z": "dc2d0fc7.ab66f",
        "group": "897eede5.c1ae9",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "Consumo",
        "label": "Consumo",
        "format": "{{msg.payload.energy_ativa}}",
        "layout": "row-spread",
        "x": 933.0000305175781,
        "y": 804.9998874664307,
        "wires": []
    },
    {
        "id": "8df02a9.92385d8",
        "type": "ui_text",
        "z": "dc2d0fc7.ab66f",
        "group": "897eede5.c1ae9",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "Tensão",
        "label": "Tensão",
        "format": "{{msg.payload.voltage_real}}",
        "layout": "row-spread",
        "x": 934.0000305175781,
        "y": 853.9998874664307,
        "wires": []
    },
    {
        "id": "8854176c.41c818",
        "type": "ui_text",
        "z": "dc2d0fc7.ab66f",
        "group": "897eede5.c1ae9",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "Consumo",
        "label": "Corrente",
        "format": "{{msg.payload.phase_real}}",
        "layout": "row-spread",
        "x": 939.0000305175781,
        "y": 897.9998874664307,
        "wires": []
    },
    {
        "id": "f617cae1.8cc938",
        "type": "function",
        "z": "dc2d0fc7.ab66f",
        "name": "Tensao ",
        "func": "msg.payload.voltage_real = msg.payload.voltage_real_rms\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 687.4999923706055,
        "y": 546.9999256134033,
        "wires": [
            [
                "4e753f9e.aa74f"
            ]
        ]
    },
    {
        "id": "4e753f9e.aa74f",
        "type": "ui_gauge",
        "z": "dc2d0fc7.ab66f",
        "name": "",
        "group": "86e7ceb0.51a1",
        "order": 4,
        "width": 0,
        "height": 0,
        "gtype": "gage",
        "title": "Tensão",
        "label": "V",
        "format": "{{msg.payload.voltage_real}}",
        "min": 0,
        "max": "500",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "220",
        "seg2": "240",
        "x": 928.9999771118164,
        "y": 534.9999389648438,
        "wires": []
    },
    {
        "id": "f689312c.f4139",
        "type": "function",
        "z": "dc2d0fc7.ab66f",
        "name": "Corrente",
        "func": "msg.payload.phase_real_rms = msg.payload.phase_real_rms\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 681.9999694824219,
        "y": 607.9999237060547,
        "wires": [
            [
                "d12e2fa.bea9ed",
                "b9fdfd80.0360c"
            ]
        ]
    },
    {
        "id": "d12e2fa.bea9ed",
        "type": "ui_gauge",
        "z": "dc2d0fc7.ab66f",
        "name": "",
        "group": "86e7ceb0.51a1",
        "order": 4,
        "width": 0,
        "height": 0,
        "gtype": "gage",
        "title": "Corrente",
        "label": "A",
        "format": "{{msg.payload.phase_real_rms}}",
        "min": 0,
        "max": "10",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "2",
        "seg2": "5",
        "x": 930.9999771118164,
        "y": 585.9999389648438,
        "wires": []
    },
    {
        "id": "a772ba4c.73a938",
        "type": "function",
        "z": "dc2d0fc7.ab66f",
        "name": "Consumo Total",
        "func": "msg.payload = msg.payload.energy_ativa\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 702.0000152587891,
        "y": 697.9999256134033,
        "wires": [
            [
                "950bde97.211ed"
            ]
        ]
    },
    {
        "id": "de47dd2f.5cd97",
        "type": "http in",
        "z": "dc2d0fc7.ab66f",
        "name": "POST ultimo evento",
        "url": "/attstatus",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 136.29261779785156,
        "y": 696.9998941421509,
        "wires": [
            [
                "135ff545.e0f5eb"
            ]
        ]
    },
    {
        "id": "135ff545.e0f5eb",
        "type": "function",
        "z": "dc2d0fc7.ab66f",
        "name": "tratativador",
        "func": "return msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 349.2926826477051,
        "y": 697.0482501983643,
        "wires": [
            [
                "d0c4804a.5ca8b",
                "f617cae1.8cc938",
                "f689312c.f4139",
                "a772ba4c.73a938",
                "c4bded6d.00f68"
            ]
        ]
    },
    {
        "id": "a78e9abf.453128",
        "type": "debug",
        "z": "dc2d0fc7.ab66f",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": true,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 704.2926483154297,
        "y": 941.1817903518677,
        "wires": []
    },
    {
        "id": "d0c4804a.5ca8b",
        "type": "http response",
        "z": "dc2d0fc7.ab66f",
        "name": "Return 200",
        "statusCode": "200",
        "headers": {},
        "x": 696.2812957763672,
        "y": 905.6759872436523,
        "wires": []
    },
    {
        "id": "359b6046.ee78f",
        "type": "ui_text",
        "z": "dc2d0fc7.ab66f",
        "group": "897eede5.c1ae9",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "Consumo Total Diário",
        "label": "Consumo Total Diário",
        "format": "{{msg.payload.total_energy_daily}}",
        "layout": "row-spread",
        "x": 974.0142593383789,
        "y": 943.0056400299072,
        "wires": []
    },
    {
        "id": "c34bfbf4.31b268",
        "type": "maps",
        "z": "dc2d0fc7.ab66f",
        "name": "mapa de consumo",
        "path": "mapaconsumo",
        "maptitle": "Map title",
        "x": 554.2870407104492,
        "y": 20,
        "wires": [
            []
        ]
    },
    {
        "id": "94a58127.32279",
        "type": "ui_template",
        "z": "dc2d0fc7.ab66f",
        "group": "b8754d37.7beb2",
        "name": "",
        "order": 1,
        "width": "6",
        "height": "2",
        "format": "<script>\nvar redirectconsumo = function(){\n//window.location.href = \"http://127.0.0.1:1880/mapaconsumo\";\n window.open ('http://127.0.0.1:1880/mapaconsumo', \"_newtab\" ); \n//var msg.payload = [{\"channel\":\"TEMP\",\"dataset\":[{\"lon\":-52.40667,\"lat\":-28.26278,\"name\":\"Casa X\",\"description\":\"Consumo \",\"value\":0.12,\"unit\":\"kWh\",\"iconColor\":\"Blue\"},{\"lon\":-52.40987,\"lat\":-28.26578,\"name\":\"Casa Y\",\"description\":\"Consumo \",\"value\":0.12,\"unit\":\"kWh\",\"iconColor\":\"Blue\"}]},{\"channel\":\"PESO\",\"dataset\":[{\"lon\":-52.48667,\"lat\":-28.26278,\"name\":\"Casa X\",\"description\":\"Consumo \",\"value\":0.12,\"unit\":\"kWh\",\"iconColor\":\"Blue\"},{\"lon\":-52.40087,\"lat\":-28.26578,\"name\":\"Casa Y\",\"description\":\"Consumo \",\"value\":0.12,\"unit\":\"kWh\",\"iconColor\":\"Blue\"}]}]\n    \n}\n\nvar redirectAlertas = function(){\n//window.location.href = \"http://127.0.0.1:1880/mapaconsumo\";\n window.open ('http://127.0.0.1:1880/mapaalerta', \"_newtab\" ); \n//var msg.payload = [{\"channel\":\"TEMP\",\"dataset\":[{\"lon\":-52.40667,\"lat\":-28.26278,\"name\":\"Casa X\",\"description\":\"Consumo \",\"value\":0.12,\"unit\":\"kWh\",\"iconColor\":\"Blue\"},{\"lon\":-52.40987,\"lat\":-28.26578,\"name\":\"Casa Y\",\"description\":\"Consumo \",\"value\":0.12,\"unit\":\"kWh\",\"iconColor\":\"Blue\"}]},{\"channel\":\"PESO\",\"dataset\":[{\"lon\":-52.48667,\"lat\":-28.26278,\"name\":\"Casa X\",\"description\":\"Consumo \",\"value\":0.12,\"unit\":\"kWh\",\"iconColor\":\"Blue\"},{\"lon\":-52.40087,\"lat\":-28.26578,\"name\":\"Casa Y\",\"description\":\"Consumo \",\"value\":0.12,\"unit\":\"kWh\",\"iconColor\":\"Blue\"}]}]\n    \n}\n\n</script>\n\n<button onclick=\"redirectconsumo()\">Abrir Mapa de Consumo</button>\n<button onclick=\"redirectAlertas()\">Abrir Mapa de Alertas</button>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "templateScope": "local",
        "x": 119.28968048095703,
        "y": 76.73862361907959,
        "wires": [
            []
        ]
    },
    {
        "id": "11fa1d89.1ff4b2",
        "type": "inject",
        "z": "dc2d0fc7.ab66f",
        "name": "postsimulator",
        "topic": "postsimulator",
        "payload": "[{\"channel\":\"TEMP\",\"dataset\":[{\"lon\":-52.40667,\"lat\":-28.26278,\"name\":\"Casa X\",\"description\":\"Consumo \",\"value\":0.12,\"unit\":\"kWh\",\"iconColor\":\"Blue\"},{\"lon\":-52.40987,\"lat\":-28.26578,\"name\":\"Casa Y\",\"description\":\"Consumo \",\"value\":0.12,\"unit\":\"kWh\",\"iconColor\":\"Blue\"}]},{\"channel\":\"PESO\",\"dataset\":[{\"lon\":-52.48667,\"lat\":-28.26278,\"name\":\"Casa X\",\"description\":\"Consumo \",\"value\":0.12,\"unit\":\"kWh\",\"iconColor\":\"Blue\"},{\"lon\":-52.40087,\"lat\":-28.26578,\"name\":\"Casa Y\",\"description\":\"Consumo \",\"value\":0.12,\"unit\":\"kWh\",\"iconColor\":\"Blue\"}]}]",
        "payloadType": "json",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 342.01426696777344,
        "y": 24.07104778289795,
        "wires": [
            [
                "c34bfbf4.31b268"
            ]
        ]
    },
    {
        "id": "b8965823.e61858",
        "type": "maps",
        "z": "dc2d0fc7.ab66f",
        "name": "Mapa de alertas",
        "path": "mapaalerta",
        "maptitle": "Map title",
        "x": 882.014169216156,
        "y": 223.07102227210999,
        "wires": [
            []
        ]
    },
    {
        "id": "81217358.773fb",
        "type": "inject",
        "z": "dc2d0fc7.ab66f",
        "name": "postsimulatoralert",
        "topic": "Alert simulator",
        "payload": "[{\"channel\":\"TEMP\",\"dataset\":[{\"lon\":-52.40667,\"lat\":-28.26278,\"name\":\"Casa X\",\"description\":\"Alerta SOBRETENSÃO \",\"value\":250,\"unit\":\"V\",\"iconColor\":\"Red\"},{\"lon\":-52.40987,\"lat\":-28.26578,\"name\":\"Casa Y\",\"description\":\"Alerta SOBRETENSÃO \",\"value\":230,\"unit\":\"V\",\"iconColor\":\"Yellow\"}]}]",
        "payloadType": "json",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 332.0142402648926,
        "y": 73.07104778289795,
        "wires": [
            []
        ]
    },
    {
        "id": "952ebdd2.6c2de",
        "type": "http in",
        "z": "dc2d0fc7.ab66f",
        "name": "POST att map",
        "url": "/attmap",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 79.01424932479858,
        "y": 347.00556564331055,
        "wires": [
            [
                "9b5ebc4c.290a9",
                "6731f754.ae45d8"
            ]
        ]
    },
    {
        "id": "caccb64a.06e478",
        "type": "debug",
        "z": "dc2d0fc7.ab66f",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": true,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 915.2812399864197,
        "y": 353.0965576171875,
        "wires": []
    },
    {
        "id": "9b5ebc4c.290a9",
        "type": "http response",
        "z": "dc2d0fc7.ab66f",
        "name": "OK",
        "statusCode": "200",
        "headers": {},
        "x": 250.2926788330078,
        "y": 409.0482578277588,
        "wires": []
    },
    {
        "id": "5eec24f7.4c2a9c",
        "type": "json",
        "z": "dc2d0fc7.ab66f",
        "name": "",
        "property": "payload",
        "action": "obj",
        "pretty": false,
        "x": 594.2898535728455,
        "y": 260.36634635925293,
        "wires": [
            [
                "caccb64a.06e478",
                "b8965823.e61858"
            ]
        ]
    },
    {
        "id": "6731f754.ae45d8",
        "type": "function",
        "z": "dc2d0fc7.ab66f",
        "name": "tra",
        "func": "msg.payload = msg.payload.testemapa;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 250.01426649093628,
        "y": 361.00560569763184,
        "wires": [
            [
                "ffd723de.85419"
            ]
        ]
    },
    {
        "id": "ffd723de.85419",
        "type": "change",
        "z": "dc2d0fc7.ab66f",
        "name": "",
        "rules": [
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "'",
                "fromt": "str",
                "to": "\"",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 385.0142340660095,
        "y": 267.0056095123291,
        "wires": [
            [
                "5eec24f7.4c2a9c"
            ]
        ]
    },
    {
        "id": "47a35e11.be937",
        "type": "function",
        "z": "dc2d0fc7.ab66f",
        "name": "tra",
        "func": "msg.payload = [msg.payload.testemapa[0]];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 618.0142188072205,
        "y": 329.005576133728,
        "wires": [
            []
        ]
    },
    {
        "id": "3f6d1fe6.35e14",
        "type": "ui_group",
        "z": "",
        "name": "corrente",
        "tab": "3a2c94bf.5d8efc",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "daea733b.25795",
        "type": "ui_group",
        "z": "",
        "name": "corrente2",
        "tab": "3a2c94bf.5d8efc",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "897eede5.c1ae9",
        "type": "ui_group",
        "z": "",
        "name": "Ultimo Evento",
        "tab": "3a2c94bf.5d8efc",
        "order": 5,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "86e7ceb0.51a1",
        "type": "ui_group",
        "z": "",
        "name": "Gráficos",
        "tab": "3a2c94bf.5d8efc",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "b8754d37.7beb2",
        "type": "ui_group",
        "z": "",
        "name": "Map",
        "tab": "50195f5b.7567d",
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "3a2c94bf.5d8efc",
        "type": "ui_tab",
        "z": "",
        "name": "Grafico Último Evento",
        "icon": "dashboard",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "50195f5b.7567d",
        "type": "ui_tab",
        "z": "",
        "name": "Map",
        "icon": "dashboard",
        "disabled": false,
        "hidden": false
    }
]